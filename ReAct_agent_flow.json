{
  "nodes": [
    {
      "id": "user_input",
      "class": "UserInputNode",
      "config": {}
    },
    {
      "id": "agent",
      "class": "AgentNode",
      "config": {}
    },
    {
      "id": "search",
      "class": "SearchNode",
      "config": {}
    },
    {
      "id": "guardrails",
      "class": "GuardrailsNode",
      "config": {}
    },
    {
      "id": "response",
      "class": "ResponseNode",
      "config": {}
    }
  ],
  "edges": [
    {
      "from": "user_input",
      "to": "agent"
    },
    {
      "from": "agent",
      "to": "search",
      "condition": "shared['needs_search']"
    },
    {
      "from": "agent", 
      "to": "guardrails",
      "condition": "not shared['needs_search']"
    },
    {
      "from": "search",
      "to": "guardrails"
    },
    {
      "from": "guardrails",
      "to": "response"
    },
    {
      "from": "response",
      "to": "user_input"
    }
  ],
  "start": "user_input",
  "initial_state": {
    "conversation_history": []
  }
}